import{h as N,r,j as e,v as g,L as y,a as v,u as P}from"./index-beVSSfOz.js";import{K as u}from"./key-square-DZ5whDzm.js";const k=()=>{const{token:f}=N(),[s,w]=r.useState({password:"",confirmPassword:""}),[c,t]=r.useState(""),[d,o]=r.useState(""),[m,n]=r.useState(!1),[l,p]=r.useState(!1),x=a=>{const{name:i,value:j}=a.target;w(b=>({...b,[i]:j})),t(""),o("")},h=async a=>{if(a.preventDefault(),t(""),o(""),n(!0),!s.password||!s.confirmPassword){t("⚠️ Please fill in both fields."),n(!1);return}if(s.password!==s.confirmPassword){t("❌ Passwords do not match."),n(!1);return}try{const i=await v.post(`${P}auth/reset-password`,{token:f,newPassword:s.password});o("✅ Password reset successfully!")}catch{t("❌ Failed to reset password. Token may be invalid or expired.")}finally{n(!1)}};return e.jsx("div",{className:"relative h-screen w-full flex flex-col gap-y-4 md:flex-row justify-center items-center",children:e.jsx("div",{className:"h-full w-full bg-[#FFFFFF] md:w-[40%]",children:e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsxs("div",{className:"flex w-full flex-col items-center justify-center rounded-xl border bg-white p-8 gap-4",children:[e.jsx("img",{src:g,alt:"virtual Logo",style:{width:"100px"}}),e.jsx("h2",{className:"font-kanit mb-4 text-center text-sm font-semibold text-[#003366 ]",children:"SET NEW PASSWORD"}),d&&e.jsx("p",{className:"mb-2 text-center text-sm text-green-600",children:d}),c&&e.jsx("p",{className:"mb-2 text-center text-sm text-red-500",children:c}),e.jsxs("form",{onSubmit:h,className:"w-full",children:[e.jsxs("div",{className:"mb-4 w-full mt-1 rounded border gap-2 p-2 flex items-center justify-between",children:[e.jsx(u,{className:"text-[#003366 ]",size:20}),e.jsx("input",{type:l?"text":"password",name:"password",value:s.password,onChange:x,className:"w-full text-sm decoration-none outline-none",placeholder:"New Password"})]}),e.jsxs("div",{className:"mb-4 w-full mt-1 rounded border gap-2 p-2 flex items-center justify-between",children:[e.jsx(u,{className:"text-[#003366 ]",size:20}),e.jsx("input",{type:l?"text":"password",name:"confirmPassword",value:s.confirmPassword,onChange:x,className:"w-full text-sm decoration-none outline-none",placeholder:"Confirm New Password"}),e.jsx("div",{className:"flex justify-center items-center p-1 cursor-pointer",onClick:()=>p(a=>!a),children:e.jsx("p",{className:"text-xs text-[#003366 ]",children:l?"Hide":"Show"})})]}),e.jsx("button",{type:"submit",className:"w-full rounded bg-[#003366] py-2 text-white hover:bg-[#7A54A1] flex justify-center items-center",disabled:m,children:m?e.jsx("div",{className:"w-5 h-5 border-2 border-t border-white rounded-full animate-spin"}):"Reset Password"})]}),e.jsx("p",{className:"font-kanit mt-4 text-center text-gray-600",children:e.jsx(y,{to:"/signin",className:"text-[#003366 ] hover:text-[#7A54A1]",children:"Back to Login"})})]})})})})};export{k as default};
