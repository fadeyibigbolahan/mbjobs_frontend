import{r as a,j as e,U as C,a as b,u as f}from"./index-CmvBuaAL.js";import{B as c}from"./book-open-BR09Hdk-.js";import{U as S}from"./user-zK-9aP32.js";import{C as E}from"./clock-8OGjY4dO.js";const D=()=>{const[d,m]=a.useState([]),[j,x]=a.useState(!0),[r,y]=a.useState("all"),[h,u]=a.useState(null),N=["all","Programming","Design","Marketing","Business","Data Science","Photography"],g=async()=>{try{x(!0),u(null);const s=await b.get(`${f}courses`);console.log("Fetched courses:",s.data);const i=(Array.isArray(s.data)?s.data:s.data.courses||[]).filter(l=>l.published===!0);m(i)}catch(s){console.error("Failed to load courses:",s),u("Failed to load courses. Please try again later.")}finally{x(!1)}};a.useEffect(()=>{g()},[]);const n=r==="all"?d:d.filter(s=>s.category===r),v=s=>{switch(s){case"Beginner":return"bg-green-100 text-green-800";case"Intermediate":return"bg-yellow-100 text-yellow-800";case"Advanced":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},w=async s=>{var t,i;try{const l=localStorage.getItem("authToken"),p=await b.post(`${f}courses/${s}/enroll`,{},{headers:{Authorization:l}});alert("Successfully enrolled in the course!"),m(d.map(o=>o._id===s?{...o,enrollments:o.enrollments+1}:o))}catch(l){console.error("Enrollment failed:",l);const p=((i=(t=l.response)==null?void 0:t.data)==null?void 0:i.message)||"Failed to enroll in course";alert(p)}};return j?e.jsx("div",{className:"p-2 text-xs",children:e.jsxs("div",{className:"flex items-center justify-center min-h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("p",{className:"ml-4 text-lg",children:"Loading courses..."})]})}):h?e.jsx("div",{className:"min-h-screen flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(c,{className:"mx-auto h-16 w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xl font-medium text-gray-900 mb-2",children:"Error Loading Courses"}),e.jsx("p",{className:"text-gray-500 mb-4",children:h}),e.jsx("button",{onClick:g,className:"bg-blue-600 hover:bg-blue-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Try Again"})]})}):e.jsxs("div",{className:"min-h-screen text-xs",children:[e.jsx("div",{className:"bg-white border-b",children:e.jsxs("div",{className:"max-w-7xl mx-auto md:px-6 py-2",children:[e.jsx("h1",{className:"md:text-3xl text-xl font-bold text-gray-900 mb-2",children:"Browse Courses"}),e.jsx("p",{className:"text-sm text-gray-600",children:"Discover your next learning adventure"})]})}),e.jsxs("div",{className:"max-w-7xl mx-auto p-2",children:[e.jsx("div",{className:"mb-8",children:e.jsx("div",{className:"flex flex-wrap gap-2",children:N.map(s=>e.jsx("button",{onClick:()=>y(s),className:`px-4 py-1 text-xs rounded-full font-medium transition-all ${r===s?"bg-blue-600 text-white shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-200"}`,children:s==="all"?"All Courses":s},s))})}),e.jsx("div",{className:"mb-6",children:e.jsxs("p",{className:"text-gray-600",children:["Showing ",n.length," course",n.length!==1?"s":""]})}),n.length===0?e.jsxs("div",{className:"text-center py-16",children:[e.jsx(c,{className:"mx-auto h-10 w-10 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-xs font-medium text-gray-900 mb-2",children:"No courses found"}),e.jsx("p",{className:"text-gray-500",children:r==="all"?"No published courses available at the moment.":"Try adjusting your filters to see more courses."})]}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8",children:n.map(s=>e.jsxs("div",{className:"bg-white rounded-2xl shadow-sm hover:shadow-xl transition-all duration-300 overflow-hidden group border border-gray-100",children:[e.jsxs("div",{className:"relative overflow-hidden",children:[s.thumbnail?e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-48 object-cover group-hover:scale-105 transition-transform duration-300",onError:t=>{t.target.style.display="none",t.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:"w-full h-48 bg-gradient-to-br from-blue-500 to-purple-600 flex items-center justify-center text-white text-lg font-semibold group-hover:scale-105 transition-transform duration-300",style:{display:s.thumbnail?"none":"flex"},children:s.title.charAt(0).toUpperCase()}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-medium ${v(s.difficulty)}`,children:s.difficulty})}),e.jsx("div",{className:"absolute top-4 right-4 bg-white rounded-full px-3 py-1 shadow-sm",children:e.jsx("span",{className:"text-sm font-bold text-blue-600",children:s.price?`$${s.price}`:"Free"})})]}),e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"mb-3",children:e.jsx("span",{className:"text-xs font-medium text-blue-600 bg-blue-50 px-2 py-1 rounded",children:s.category})}),e.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-blue-600 transition-colors line-clamp-2",children:s.title}),e.jsxs("div",{className:"flex items-center mb-3 text-sm text-gray-600",children:[e.jsx(S,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:s.instructor||"TBD"})]}),e.jsx("p",{className:"text-gray-700 text-sm leading-relaxed mb-4 line-clamp-3",children:s.description}),e.jsxs("div",{className:"flex items-center justify-between mb-4 text-sm text-gray-600",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(E,{className:"h-4 w-4 mr-1"}),e.jsx("span",{children:s.duration||"Self-paced"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(C,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:[s.enrollments||0," enrolled"]})]})]}),s.modules&&s.modules.length>0&&e.jsxs("div",{className:"mb-4 text-sm text-gray-600",children:[e.jsx(c,{className:"h-4 w-4 inline mr-1"}),e.jsxs("span",{children:[s.modules.length," module",s.modules.length!==1?"s":""]})]}),e.jsx("div",{className:"flex gap-2",children:e.jsx("button",{onClick:()=>w(s._id),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-xl transition-colors",children:"Enroll Now"})})]})]},s._id))})]})]})};export{D as default};
