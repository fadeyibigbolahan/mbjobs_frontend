import{c as I,r as l,j as e,X as p,a as b,u as f}from"./index-CmvBuaAL.js";import{P as T}from"./plus-DzaCw6xK.js";import{C as F}from"./circle-alert-BUeR-iuh.js";import{C as E}from"./circle-check-big-DV1rafvJ.js";import{S as N}from"./save-D_Q0075r.js";import{T as P}from"./trash-2-14Gm8EGC.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=I("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]),U=()=>{const[i,u]=l.useState([]),[d,n]=l.useState(!1),[y,a]=l.useState(""),[j,c]=l.useState(""),[C,m]=l.useState(!1),[x,h]=l.useState(null),[r,o]=l.useState({name:"",description:"",isActive:!0}),w=async()=>{n(!0),a("");try{const t=localStorage.getItem("authToken"),s=await b.get(`${f}categories`,{headers:{Authorization:t}});console.log("Fetched categories:",s.data),s.data.success?u(s.data.categories):a("Failed to fetch categories")}catch(t){a(t.message||"Failed to fetch categories")}finally{n(!1)}},A=async()=>{if(!r.name.trim()){a("Category name is required");return}n(!0),a("");try{const t=localStorage.getItem("authToken"),s=await b.post(`${f}categories`,r,{headers:{Authorization:t}});s.data.success&&(u([...i,s.data.category]),o({name:"",description:"",isActive:!0}),m(!1),c("Category added successfully"),setTimeout(()=>c(""),3e3))}catch(t){a(t.message||"Failed to add category")}finally{n(!1)}},S=async t=>{if(!r.name.trim()){a("Category name is required");return}n(!0),a("");try{const s=await apiCall(`${API_BASE_URL}/${t}`,{method:"PUT",body:JSON.stringify(r)});s.success&&(u(i.map(g=>g._id===t?s.category:g)),h(null),o({name:"",description:"",isActive:!0}),c("Category updated successfully"),setTimeout(()=>c(""),3e3))}catch(s){a(s.message||"Failed to update category")}finally{n(!1)}},k=async t=>{if(window.confirm("Are you sure you want to delete this category?")){n(!0),a("");try{const s=localStorage.getItem("authToken"),g=await b.delete(`${f}categories/${t}`,{headers:{Authorization:s}});console.log("Delete response:",g.data),g.data.success&&(u(i.filter(_=>_._id!==t)),c("Category deleted successfully"),setTimeout(()=>c(""),3e3))}catch(s){a(s.message||"Failed to delete category")}finally{n(!1)}}},z=t=>{h(t._id),o({name:t.name,description:t.description||"",isActive:t.isActive})},v=()=>{h(null),m(!1),o({name:"",description:"",isActive:!0}),a("")};return l.useEffect(()=>{w()},[]),e.jsx("div",{className:"max-w-6xl mx-auto p-6 bg-white text-xs min-h-screen",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsx("h1",{className:"text-xl font-bold text-gray-800",children:"Category Management"}),e.jsxs("button",{onClick:()=>m(!0),className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",disabled:d,children:[e.jsx(T,{size:20}),"Add Category"]})]}),y&&e.jsxs("div",{className:"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg flex items-center gap-2",children:[e.jsx(F,{className:"text-red-600",size:20}),e.jsx("span",{className:"text-red-700",children:y}),e.jsx("button",{onClick:()=>a(""),className:"ml-auto text-red-600 hover:text-red-800",children:e.jsx(p,{size:16})})]}),j&&e.jsxs("div",{className:"mb-4 p-4 bg-green-50 border border-green-200 rounded-lg flex items-center gap-2",children:[e.jsx(E,{className:"text-green-600",size:20}),e.jsx("span",{className:"text-green-700",children:j})]}),C&&e.jsxs("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsx("h3",{className:"text-lg font-semibold mb-4 text-blue-800",children:"Add New Category"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Name *"}),e.jsx("input",{type:"text",value:r.name,onChange:t=>o({...r,name:t.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Category name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),e.jsx("input",{type:"text",value:r.description,onChange:t=>o({...r,description:t.target.value}),className:"w-full p-3 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Category description"})]})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsxs("button",{onClick:A,disabled:d,className:"bg-green-600 hover:bg-green-700 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors disabled:opacity-50",children:[e.jsx(N,{size:16}),d?"Saving...":"Save"]}),e.jsxs("button",{onClick:v,className:"bg-gray-500 hover:bg-gray-600 text-white px-4 py-2 rounded-lg flex items-center gap-2 transition-colors",children:[e.jsx(p,{size:16}),"Cancel"]})]})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full border-collapse bg-white",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-gray-100",children:[e.jsx("th",{className:"border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700",children:"Name"}),e.jsx("th",{className:"border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700",children:"Description"}),e.jsx("th",{className:"border border-gray-300 px-4 py-3 text-left font-semibold text-gray-700",children:"Status"}),e.jsx("th",{className:"border border-gray-300 px-4 py-3 text-center font-semibold text-gray-700",children:"Actions"})]})}),e.jsx("tbody",{children:d&&i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"border border-gray-300 px-4 py-8 text-center text-gray-500",children:"Loading categories..."})}):i.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"border border-gray-300 px-4 py-8 text-center text-gray-500",children:"No categories found"})}):i.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50",children:[e.jsx("td",{className:"border border-gray-300 px-4 py-3",children:x===t._id?e.jsx("input",{type:"text",value:r.name,onChange:s=>o({...r,name:s.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("span",{className:"font-medium text-gray-800",children:t.name})}),e.jsx("td",{className:"border border-gray-300 px-4 py-3",children:x===t._id?e.jsx("input",{type:"text",value:r.description,onChange:s=>o({...r,description:s.target.value}),className:"w-full p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent"}):e.jsx("span",{className:"text-gray-600",children:t.description||"-"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-3",children:x===t._id?e.jsxs("select",{value:r.isActive,onChange:s=>o({...r,isActive:s.target.value==="true"}),className:"p-2 border border-gray-300 rounded focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:!0,children:"Active"}),e.jsx("option",{value:!1,children:"Inactive"})]}):e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${t.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:t.isActive?"Active":"Inactive"})}),e.jsx("td",{className:"border border-gray-300 px-4 py-3 text-center",children:x===t._id?e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>S(t._id),disabled:d,className:"bg-green-600 hover:bg-green-700 text-white p-2 rounded transition-colors disabled:opacity-50",children:e.jsx(N,{size:16})}),e.jsx("button",{onClick:v,className:"bg-gray-500 hover:bg-gray-600 text-white p-2 rounded transition-colors",children:e.jsx(p,{size:16})})]}):e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>z(t),className:"bg-blue-600 hover:bg-blue-700 text-white p-2 rounded transition-colors",disabled:d,children:e.jsx($,{size:16})}),e.jsx("button",{onClick:()=>k(t._id),className:"bg-red-600 hover:bg-red-700 text-white p-2 rounded transition-colors",disabled:d,children:e.jsx(P,{size:16})})]})})]},t._id))})]})}),e.jsxs("div",{className:"mt-6 text-sm text-gray-600",children:[e.jsxs("p",{children:["Total Categories: ",i.length]}),e.jsxs("p",{className:"mt-1",children:["Active: ",i.filter(t=>t.isActive).length," | Inactive: ",i.filter(t=>!t.isActive).length]})]})]})})};export{U as default};
