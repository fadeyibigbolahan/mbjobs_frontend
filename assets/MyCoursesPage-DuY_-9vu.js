import{c as S,r as d,j as e,L as q,a as z,u as G}from"./index-beVSSfOz.js";import{B as g}from"./book-open-Bto_G8ZP.js";import{C}from"./circle-check-big-B5VhA3Lt.js";import{P as k}from"./play-QoiBiUX8.js";import{C as M}from"./clock-dcA7E8sw.js";import{U as J}from"./user-C00dDaB8.js";import{C as O}from"./calendar-DLscwgTs.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X=S("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L=S("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]),te=()=>{const[n,T]=d.useState([]),[E,u]=d.useState(!0),[i,$]=d.useState("all"),[p,f]=d.useState(null),A=s=>s.map(l=>{var v,w;const t=l.course;let r="just-started";l.progress===0?r="just-started":l.progress>=100?r="completed":r="in-progress";const a=t.modules?t.modules.length:0,m=Math.floor(l.progress/100*a);let o="Getting Started",c=null;t.modules&&t.modules.length>0&&(m<t.modules.length?(o=((v=t.modules[m])==null?void 0:v.title)||"Getting Started",m+1<t.modules.length&&(c=(w=t.modules[m+1])==null?void 0:w.title)):(o="Course Complete!",c=null));const x=a*2,h=Math.floor(l.progress/100*x),U=Math.floor((l.progress/100*x-h)*60),_=`${h}h ${U}m`,N=x-h,B=N>0?`${N}h`:"0h";return{_id:l._id,title:t.title,instructor:t.instructor,description:t.description,coverImage:t.thumbnail||"https://images.unsplash.com/photo-1633356122544-f134324a6cee?w=400&h=200&fit=crop",progress:l.progress,totalLessons:a,completedLessons:m,currentLesson:o,nextLesson:c,timeSpent:_,enrolledDate:l.createdAt,lastAccessed:l.updatedAt,status:r,category:t.category,difficulty:t.difficulty,certificateEligible:!0,certificateEarned:l.progress>=100,estimatedTimeLeft:B,courseId:t._id,rating:t.rating||0,enrollments:t.enrollments||0}}),b=async()=>{var s,l;u(!0),f(null);try{const t=localStorage.getItem("authToken");if(!t)throw new Error("Authentication token not found");const r=await z.get(`${G}courses/my/course`,{headers:{Authorization:t}});console.log("Raw API response:",r.data.courses);const a=A(r.data.courses);console.log("Transformed courses:",a),T(a)}catch(t){console.error("Failed to load courses:",t),f(((l=(s=t.response)==null?void 0:s.data)==null?void 0:l.message)||t.message||"Failed to load courses")}finally{u(!1)}};d.useEffect(()=>{b()},[]);const I=[{key:"all",label:"All Courses"},{key:"in-progress",label:"In Progress"},{key:"completed",label:"Completed"},{key:"just-started",label:"Just Started"}],j=i==="all"?n:n.filter(s=>s.status===i),P=s=>{switch(s){case"completed":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"just-started":return"bg-yellow-100 text-yellow-800";default:return"bg-gray-100 text-gray-800"}},F=s=>{switch(s){case"completed":return"Completed";case"in-progress":return"In Progress";case"just-started":return"Just Started";default:return"Unknown"}},y=s=>{const l=new Date(s),r=Math.abs(new Date-l),a=Math.ceil(r/(1e3*60*60*24));return a===1?"Yesterday":a<7?`${a} days ago`:a<30?`${Math.ceil(a/7)} weeks ago`:`${Math.ceil(a/30)} months ago`},D=n.length,H=n.filter(s=>s.status==="completed").length,V=n.filter(s=>s.status==="in-progress").length,R=n.reduce((s,l)=>{const t=parseFloat(l.timeSpent.split("h")[0])||0;return s+t},0);return E?e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center min-h-64",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),e.jsx("p",{className:"ml-0 mt-4 text-base sm:text-lg text-center",children:"Loading your courses..."})]})}):p?e.jsx("div",{className:"min-h-screen bg-gray-50 p-4 sm:p-6",children:e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4 sm:p-6 text-center",children:[e.jsx("div",{className:"text-red-600 mb-4",children:e.jsx(g,{className:"mx-auto h-12 w-12"})}),e.jsx("h3",{className:"text-lg font-medium text-red-900 mb-2",children:"Failed to Load Courses"}),e.jsx("p",{className:"text-red-700 mb-4 text-sm sm:text-base",children:p}),e.jsx("button",{onClick:b,className:"bg-red-600 hover:bg-red-700 text-white font-medium py-2 px-4 rounded-lg transition-colors",children:"Try Again"})]})})}):e.jsxs("div",{className:"min-h-screen bg-white",children:[e.jsx("div",{className:"bg-white shadow-sm border-b",children:e.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-6 lg:py-8",children:[e.jsxs("div",{className:"flex flex-col space-y-4 lg:space-y-0 lg:flex-row lg:items-center justify-between mb-4 sm:mb-6",children:[e.jsxs("div",{className:"text-center sm:text-left",children:[e.jsx("h1",{className:"text-xl sm:text-2xl lg:text-3xl font-bold text-gray-900 mb-2",children:"My Learning"}),e.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"Continue your learning journey"})]}),e.jsxs("div",{className:"grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-3 lg:gap-4 w-full lg:w-auto",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg sm:rounded-xl p-2 sm:p-3 text-center",children:[e.jsx(g,{className:"h-4 w-4 sm:h-5 sm:w-5 text-blue-600 mx-auto mb-1"}),e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-blue-600",children:D}),e.jsx("div",{className:"text-xs text-gray-600",children:"Total Courses"})]}),e.jsxs("div",{className:"bg-green-50 rounded-lg sm:rounded-xl p-2 sm:p-3 text-center",children:[e.jsx(C,{className:"h-4 w-4 sm:h-5 sm:w-5 text-green-600 mx-auto mb-1"}),e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-green-600",children:H}),e.jsx("div",{className:"text-xs text-gray-600",children:"Completed"})]}),e.jsxs("div",{className:"bg-yellow-50 rounded-lg sm:rounded-xl p-2 sm:p-3 text-center",children:[e.jsx(k,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-600 mx-auto mb-1"}),e.jsx("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-yellow-600",children:V}),e.jsx("div",{className:"text-xs text-gray-600",children:"In Progress"})]}),e.jsxs("div",{className:"bg-purple-50 rounded-lg sm:rounded-xl p-2 sm:p-3 text-center",children:[e.jsx(M,{className:"h-4 w-4 sm:h-5 sm:w-5 text-purple-600 mx-auto mb-1"}),e.jsxs("div",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-purple-600",children:[R.toFixed(0),"h"]}),e.jsx("div",{className:"text-xs text-gray-600",children:"Time Spent"})]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 sm:gap-3 justify-center sm:justify-start",children:I.map(s=>e.jsx("button",{onClick:()=>$(s.key),className:`px-3 sm:px-4 lg:px-6 py-2 rounded-full text-sm sm:text-base font-medium transition-all ${i===s.key?"bg-blue-600 text-white shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:s.label},s.key))})]})}),e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 py-4 sm:py-6 lg:py-8",children:j.length===0?e.jsxs("div",{className:"text-center py-12 sm:py-16",children:[e.jsx(g,{className:"mx-auto h-12 w-12 sm:h-16 sm:w-16 text-gray-400 mb-4"}),e.jsx("h3",{className:"text-lg sm:text-xl font-medium text-gray-900 mb-2",children:i==="all"?"No enrolled courses":"No courses found"}),e.jsx("p",{className:"text-gray-500 text-sm sm:text-base px-4",children:i==="all"?"Start learning by enrolling in some courses!":"Try adjusting your filters or enroll in some courses!"})]}):e.jsx("div",{className:"space-y-4 sm:space-y-6",children:j.map(s=>e.jsx("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-sm hover:shadow-md transition-all duration-300 overflow-hidden border border-gray-100",children:e.jsxs("div",{className:"flex flex-col lg:flex-row",children:[e.jsxs("div",{className:"w-full lg:w-80 h-48 sm:h-56 lg:h-auto relative flex-shrink-0",children:[e.jsx("img",{src:s.coverImage,alt:s.title,className:"w-full h-full object-cover",onError:l=>{l.target.src="https://images.unsplash.com/photo-1633356122544-f134324a6cee?w=400&h=200&fit=crop"}}),e.jsx("div",{className:"absolute top-3 sm:top-4 left-3 sm:left-4",children:e.jsx("span",{className:`px-2 sm:px-3 py-1 rounded-full text-xs font-medium ${P(s.status)}`,children:F(s.status)})}),s.certificateEarned&&e.jsx("div",{className:"absolute top-3 sm:top-4 right-3 sm:right-4",children:e.jsx(L,{className:"h-4 w-4 sm:h-5 sm:w-5 text-yellow-500"})})]}),e.jsx("div",{className:"flex-1 p-4 sm:p-6",children:e.jsxs("div",{className:"flex flex-col h-full",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-start justify-between mb-3 sm:mb-4",children:[e.jsxs("div",{className:"flex-1 mb-3 sm:mb-0 sm:pr-4",children:[e.jsx("h3",{className:"text-lg sm:text-xl lg:text-2xl font-bold text-gray-900 mb-1 sm:mb-2",children:s.title}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center text-gray-600 mb-2 text-sm sm:text-base",children:[e.jsxs("div",{className:"flex items-center mb-1 sm:mb-0",children:[e.jsx(J,{className:"h-4 w-4 mr-1 flex-shrink-0"}),e.jsx("span",{className:"truncate",children:s.instructor})]}),e.jsx("span",{className:"hidden sm:inline mx-2",children:"â€¢"}),e.jsx("span",{className:"text-sm",children:s.difficulty})]})]}),e.jsxs("div",{className:"text-left sm:text-right flex-shrink-0",children:[e.jsx("div",{className:"text-xs sm:text-sm text-gray-500",children:"Last accessed"}),e.jsx("div",{className:"text-xs sm:text-sm font-medium",children:y(s.lastAccessed)})]})]}),e.jsx("p",{className:"text-gray-700 mb-4 text-sm sm:text-base line-clamp-2 sm:line-clamp-none",children:s.description}),e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex justify-between text-sm mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Progress"}),e.jsxs("span",{className:"font-medium",children:[s.progress,"% complete"]})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${s.progress}%`}})}),e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[e.jsxs("span",{children:[s.completedLessons,"/",s.totalLessons," ","lessons"]}),e.jsxs("span",{className:"text-right",children:[s.estimatedTimeLeft," remaining"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-blue-600 mb-1",children:"CURRENT"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:s.currentLesson})]}),s.nextLesson&&e.jsxs("div",{className:"bg-gray-50 rounded-lg p-3",children:[e.jsx("div",{className:"text-xs font-medium text-gray-600 mb-1",children:"UP NEXT"}),e.jsx("div",{className:"text-sm font-medium text-gray-900 line-clamp-2",children:s.nextLesson})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-2 sm:gap-4 lg:gap-6 text-sm text-gray-600 mb-4 sm:mb-6",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(M,{className:"h-4 w-4 mr-1 flex-shrink-0"}),e.jsxs("span",{children:[s.timeSpent," spent"]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(O,{className:"h-4 w-4 mr-1 flex-shrink-0"}),e.jsxs("span",{children:["Started ",y(s.enrolledDate)]})]}),s.certificateEligible&&e.jsxs("div",{className:"flex items-center",children:[e.jsx(L,{className:"h-4 w-4 mr-1 flex-shrink-0"}),e.jsx("span",{children:"Certificate eligible"})]})]})]}),e.jsx("div",{className:"flex flex-col sm:flex-row gap-3",children:s.status==="completed"?e.jsxs(e.Fragment,{children:[e.jsxs("button",{className:"flex-1 bg-green-600 hover:bg-green-700 text-white font-medium py-3 px-4 rounded-lg sm:rounded-xl transition-colors flex items-center justify-center text-sm sm:text-base",children:[e.jsx(C,{className:"h-4 w-4 mr-2"}),"View Certificate"]}),e.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 px-4 rounded-lg sm:rounded-xl transition-colors text-sm sm:text-base",children:"Review Course"})]}):e.jsxs(e.Fragment,{children:[e.jsx(q,{to:`/dashboard/course-details/${s.courseId}`,className:"flex-1",children:e.jsxs("button",{className:"w-full bg-blue-600 hover:bg-blue-700 text-white font-medium py-3 px-4 rounded-lg sm:rounded-xl transition-colors flex items-center justify-center text-sm sm:text-base",children:[e.jsx(k,{className:"h-4 w-4 mr-2"}),"Continue Learning"]})}),e.jsx("button",{className:"bg-gray-100 hover:bg-gray-200 text-gray-700 font-medium py-3 px-4 rounded-lg sm:rounded-xl transition-colors flex items-center justify-center sm:w-auto",children:e.jsx(X,{className:"h-4 w-4"})})]})})]})})]})},s._id))})})]})};export{te as default};
