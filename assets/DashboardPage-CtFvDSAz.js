import{c as K,j as e,r,L as $,U as X,S as O,a as k,u as y,X as _,M as ae,b as re,d as le,e as oe,F as ne,s as ie}from"./index-beVSSfOz.js";import{B as D}from"./button-BdIgKker.js";import{P as ce,E as de}from"./pencil-Ckq1EGMM.js";import{T as xe}from"./trash-2-CyXDt3wC.js";import{M as he}from"./mail-Cvu7WEzs.js";import{M as me}from"./map-pin-CeRucVV3.js";import{E as ue}from"./eye-07QVgmhY.js";import{U as G}from"./user-C00dDaB8.js";import{M as ge,E as pe}from"./message-square-BRCOlMwf.js";import{T as be,a as fe}from"./thumbs-up-DSpx_Qj8.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const je=K("MonitorCheck",[["path",{d:"m9 10 2 2 4-4",key:"1gnqz4"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ye=K("MonitorX",[["path",{d:"m14.5 12.5-5-5",key:"1jahn5"}],["path",{d:"m9.5 12.5 5-5",key:"1k2t7b"}],["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["path",{d:"M12 17v4",key:"1riwvh"}],["path",{d:"M8 21h8",key:"1ev6f3"}]]),Ne=()=>e.jsx("div",{className:"flex justify-start items-center py-4 border-t text-xs",children:"Copyright Â© 2025 MB Jobs | All rights reserved."}),ve=()=>{const[N,g]=r.useState([]),[b,A]=r.useState(""),[f,J]=r.useState("All"),[d,M]=r.useState([]),[m,v]=r.useState(!1);r.useEffect(()=>{},[]),r.useEffect(()=>{const t=localStorage.getItem("authToken");(async()=>{try{const o=await k.get(`${y}jobs/employer/jobs`,{headers:{"Content-Type":"application/json",Authorization:t}});console.log("dashboard response",o.data.jobs),g(o.data.jobs)}catch(o){o.response?console.error("Error Response:",o.response.data):o.request?console.error("No response received:",o.request):console.error("Error setting up request:",o.message)}finally{v(!1)}})()},[]);const w=t=>({open:"bg-green-100 text-green-800 border-green-200",expired:"bg-yellow-100 text-yellow-800 border-yellow-200",closed:"bg-red-100 text-red-800 border-red-200"})[t]||"bg-gray-100 text-gray-800 border-gray-200",x=N.filter(t=>{const n=t.title.toLowerCase().includes(b.toLowerCase())||t.department.toLowerCase().includes(b.toLowerCase()),o=f==="All"||t.status===f;return n&&o}),h=t=>{M(n=>n.includes(t)?n.filter(o=>o!==t):[...n,t])},u=()=>{M(d.length===x.length?[]:x.map(t=>t.id))},C=t=>{const n=new Date(t),c=Math.abs(new Date-n),p=Math.ceil(c/(1e3*60*60*24));return p===1?"1 day ago":p<7?`${p} days ago`:p<30?`${Math.floor(p/7)} weeks ago`:n.toLocaleDateString()};return e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6 text-xs",children:[e.jsxs("div",{className:"p-2 border-b border-gray-200 my-2 flex flex-row justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-lg",children:"Job Posts"}),e.jsx($,{to:"/dashboard/my-jobs",children:e.jsx(D,{children:"View all"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 p-4",children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:d.length===x.length&&x.length>0,onChange:u})}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Job Title"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Applicants"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Location"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Salary"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Posted"}),e.jsx("th",{className:"text-center p-4 font-semibold text-gray-900",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[x.map(t=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:d.includes(t.id),onChange:()=>h(t.id)})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:t.title}),e.jsx("div",{className:"text-sm text-gray-500",children:t.department})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${w(t.status)}`,children:t.status})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(X,{size:16,className:"text-gray-400"}),e.jsx("span",{className:"font-semibold text-gray-900",children:t.applicants.length})]})}),e.jsx("td",{className:"p-4 text-gray-600",children:t.location}),e.jsx("td",{className:"p-4 text-gray-600",children:`$${t.salaryMin} - $${t.salaryMax}`}),e.jsx("td",{className:"p-4 text-gray-600",children:C(t.createdAt)}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-2",children:[e.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit Job",children:e.jsx(ce,{size:16})}),e.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"View Applicants",children:e.jsx(X,{size:16})}),e.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete Job",children:e.jsx(xe,{size:16})}),e.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"More Options",children:e.jsx(de,{size:16})})]})})]},t.id)),x.length===0&&e.jsx("tr",{children:e.jsx("td",{colSpan:"8",className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"bg-gray-100 p-4 rounded-full",children:e.jsx(O,{size:24,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"No jobs found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria"})]})]})})})]})]})}),d.length>0&&e.jsx("div",{className:"p-4 bg-blue-50 border-t border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[d.length," job",d.length>1?"s":""," ","selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-3 py-1 bg-blue-600 text-white rounded-md text-sm hover:bg-blue-700 transition-colors",children:"Bulk Edit"}),e.jsx("button",{className:"px-3 py-1 bg-red-600 text-white rounded-md text-sm hover:bg-red-700 transition-colors",children:"Delete Selected"})]})]})})]})},we=()=>{const[N,g]=r.useState([]),[b,A]=r.useState(""),[f,J]=r.useState("All"),[d,M]=r.useState("All"),[m,v]=r.useState([]);r.useState("table");const[w,x]=r.useState(!0),[h,u]=r.useState(null),[C,t]=r.useState(!1),[n,o]=r.useState(!1),[c,p]=r.useState(null),[T,L]=r.useState(""),[P,R]=r.useState(!1),[q,z]=r.useState([]),[H,I]=r.useState(!1),Q=async(s,a)=>{console.log("Fetching messages for:",s,a),I(!0);try{const l=localStorage.getItem("authToken"),i=await k.get(`${y}messages/conversation/${s}`,{headers:{Authorization:l,"Content-Type":"application/json"}});console.log("Messages response:",i.data),i.data.success&&z(i.data.messages||[])}catch(l){console.error("Error fetching messages:",l),z([])}finally{I(!1)}},W=s=>s.map(a=>({id:a._id,applicantName:a.apprentice.fullName,email:a.apprentice.email,phone:"N/A",jobTitle:a.job.title,dateApplied:a.createdAt,status:a.status.charAt(0).toUpperCase()+a.status.slice(1),experience:"N/A",location:a.job.location,rating:0,resume:"N/A",coverLetter:a.coverLetter||"Not provided",skills:[],expectedSalary:"N/A",availability:"N/A",apprenticeId:a.apprentice._id,jobId:a.job._id}));r.useEffect(()=>{const s=localStorage.getItem("authToken");(async()=>{try{const l=await k.get(`${y}application/employer`,{headers:{"Content-Type":"application/json",Authorization:s}});if(console.log("job app response",l.data),l.data.success&&l.data.applications){const i=W(l.data.applications);g(i)}else g([])}catch(l){l.response?console.error("Error Response:",l.response.data):l.request?console.error("No response received:",l.request):console.error("Error setting up request:",l.message),g([])}finally{x(!1)}})()},[]);const Y=s=>({Pending:"bg-yellow-100 text-yellow-800 border-yellow-200","Under Review":"bg-blue-100 text-blue-800 border-blue-200","Interview Scheduled":"bg-purple-100 text-purple-800 border-purple-200",Accepted:"bg-green-100 text-green-800 border-green-200",Rejected:"bg-red-100 text-red-800 border-red-200"})[s]||"bg-gray-100 text-gray-800 border-gray-200";[...new Set(N.map(s=>s.jobTitle))];const S=N.filter(s=>{const a=s.applicantName.toLowerCase().includes(b.toLowerCase())||s.email.toLowerCase().includes(b.toLowerCase())||s.jobTitle.toLowerCase().includes(b.toLowerCase()),l=f==="All"||s.status===f,i=d==="All"||s.jobTitle===d;return a&&l&&i}),Z=s=>{v(a=>a.includes(s)?a.filter(l=>l!==s):[...a,s])},ee=()=>{v(m.length===S.length?[]:S.map(s=>s.id))},U=async(s,a)=>{const l=localStorage.getItem("authToken");console.log("Updating status for appId:",s,"to",a);try{const i=await k.patch(`${y}application/${s}/status`,{status:a.toLowerCase()},{headers:{Authorization:l,"Content-Type":"application/json"}});console.log("Update response:",i.data),i.data.success?g(j=>j.map(F=>F.id===s?{...F,status:a}:F)):console.error("Failed to update status:",i.data.message)}catch(i){console.error("Error updating application status:",i)}},se=s=>{const a=new Date(s),i=Math.abs(new Date-a),j=Math.ceil(i/(1e3*60*60*24));return j===1?"1 day ago":j<7?`${j} days ago`:j<30?`${Math.floor(j/7)} weeks ago`:a.toLocaleDateString()};N.reduce((s,a)=>(s[a.status]=(s[a.status]||0)+1,s),{});const te=s=>{u(s),t(!0)},V=s=>{p(s),o(!0),L(""),Q(s.apprenticeId,s.id)},B=async()=>{if(!(!T.trim()||!c)){console.log("Sending message:",T,"to",c.applicantName),R(!0);try{const s=localStorage.getItem("authToken"),a=await k.post(`${y}messages/send`,{receiverId:c.apprenticeId,content:T,applicationId:c.id},{headers:{"Content-Type":"application/json",Authorization:s}});console.log("Message send response:",a.data),a.data.success?(z(l=>[...l,a.data.message]),alert("Message sent successfully!"),L("")):alert("Failed to send message. Please try again.")}catch(s){console.error("Error sending message:",s),alert("Error sending message. Please try again.")}finally{R(!1)}}},E=()=>{t(!1),o(!1),u(null),p(null),L(""),z([])};return w?e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6 text-xs",children:[e.jsxs("div",{className:"p-2 border-b border-gray-200 my-2 flex flex-row justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-lg",children:"Job Applications"}),e.jsx($,{to:"/dashboard/job-application",children:e.jsx(D,{children:"View all"})})]}),e.jsxs("div",{className:"p-12 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-500",children:"Loading applications..."})]})]}):e.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 mb-6 text-xs",children:[e.jsxs("div",{className:"p-2 border-b border-gray-200 my-2 flex flex-row justify-between items-center",children:[e.jsx("h2",{className:"font-semibold text-lg",children:"Job Applications"}),e.jsx($,{to:"/dashboard/job-application",children:e.jsx(D,{children:"View all"})})]}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-gray-50",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-12 p-4",children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:m.length===S.length&&S.length>0,onChange:ee})}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Applicant"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Job Position"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Cover Letter"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Status"}),e.jsx("th",{className:"text-left p-4 font-semibold text-gray-900",children:"Applied"}),e.jsx("th",{className:"text-center p-4 font-semibold text-gray-900",children:"Actions"})]})}),e.jsxs("tbody",{className:"divide-y divide-gray-200",children:[S.map(s=>e.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[e.jsx("td",{className:"p-4",children:e.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:m.includes(s.id),onChange:()=>Z(s.id)})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"w-10 h-10 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center text-white font-semibold",children:s.applicantName.split(" ").map(a=>a[0]).join("")}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold text-gray-900",children:s.applicantName}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(he,{size:12}),s.email]}),e.jsxs("div",{className:"text-sm text-gray-500 flex items-center gap-1",children:[e.jsx(me,{size:12}),s.location]})]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("div",{children:e.jsx("div",{className:"font-medium text-gray-900",children:s.jobTitle})})}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"max-w-xs",children:[e.jsx("div",{className:"text-sm text-gray-900 truncate",title:s.coverLetter,children:s.coverLetter}),s.coverLetter&&s.coverLetter!=="Not provided"&&e.jsxs("button",{onClick:()=>te(s),className:"text-blue-600 hover:text-blue-800 text-xs mt-1 flex items-center gap-1",children:[e.jsx(ue,{size:12}),"Read full"]})]})}),e.jsx("td",{className:"p-4",children:e.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${Y(s.status)}`,children:s.status})}),e.jsx("td",{className:"p-4 text-gray-600",children:se(s.dateApplied)}),e.jsx("td",{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx("button",{className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"View Profile",children:e.jsx(G,{size:16})}),e.jsx("button",{className:"p-2 text-purple-600 hover:bg-purple-50 rounded-lg transition-colors",title:"Message Applicant",onClick:()=>V(s),children:e.jsx(ge,{size:16})}),e.jsx("button",{className:"p-2 text-green-600 hover:bg-green-50 rounded-lg transition-colors",title:"Accept Application",onClick:()=>U(s.id,"Accepted"),children:e.jsx(be,{size:16})}),e.jsx("button",{className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Reject Application",onClick:()=>U(s.id,"Rejected"),children:e.jsx(fe,{size:16})}),e.jsx("button",{className:"p-2 text-gray-600 hover:bg-gray-50 rounded-lg transition-colors",title:"More Options",children:e.jsx(pe,{size:16})})]})})]},s.id)),S.length===0&&!w&&e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"bg-gray-100 p-4 rounded-full",children:e.jsx(O,{size:24,className:"text-gray-400"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"No applications found"}),e.jsx("p",{className:"text-gray-500",children:"Try adjusting your search or filter criteria"})]})]})})})]})]})}),m.length>0&&e.jsx("div",{className:"p-4 bg-blue-50 border-t border-blue-200",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{className:"text-sm font-medium text-blue-800",children:[m.length," application",m.length>1?"s":""," selected"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{className:"px-3 py-1 bg-green-600 text-white rounded-md text-sm hover:bg-green-700 transition-colors",children:"Accept Selected"}),e.jsx("button",{className:"px-3 py-1 bg-red-600 text-white rounded-md text-sm hover:bg-red-700 transition-colors",children:"Reject Selected"}),e.jsx("button",{className:"px-3 py-1 bg-purple-600 text-white rounded-md text-sm hover:bg-purple-700 transition-colors",children:"Schedule Interview"})]})]})}),C&&h&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-lg max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden",children:[e.jsx("div",{className:"p-6 border-b border-gray-200",children:e.jsxs("div",{className:"flex justify-between items-start",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["Cover Letter - ",h.applicantName]}),e.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Application for: ",h.jobTitle]})]}),e.jsx("button",{onClick:E,className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(_,{size:24})})]})}),e.jsx("div",{className:"p-6 overflow-y-auto max-h-96",children:e.jsx("div",{className:"prose prose-sm max-w-none",children:e.jsx("div",{className:"whitespace-pre-wrap text-gray-900 leading-relaxed",children:h.coverLetter})})}),e.jsx("div",{className:"p-6 border-t border-gray-200 bg-gray-50",children:e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx("button",{onClick:E,className:"px-4 py-2 text-gray-700 bg-white border border-gray-300 rounded-md hover:bg-gray-50 transition-colors",children:"Close"}),e.jsxs("button",{onClick:()=>{E(),V(h)},className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(ae,{size:16}),"Start Conversation"]})]})})]})}),n&&c&&e.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full mx-4 h-[80vh] flex flex-col overflow-hidden",children:[e.jsxs("div",{className:"p-4 border-b border-gray-200 bg-gray-50 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx("div",{className:"bg-blue-100 text-blue-600 rounded-full w-10 h-10 flex items-center justify-center font-semibold",children:c.applicantName.charAt(0)}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold text-gray-900",children:c.applicantName}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Regarding: ",c.jobTitle]})]})]}),e.jsx("button",{onClick:E,className:"text-gray-400 hover:text-gray-600 transition-colors p-1",children:e.jsx(_,{size:20})})]}),e.jsx("div",{className:"flex-1 p-4 overflow-y-auto bg-gray-100",children:H?e.jsx("div",{className:"flex justify-center items-center h-full",children:e.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):q.length>0?q.map((s,a)=>e.jsx("div",{className:`flex mb-4 ${s.sender.fullName?"justify-end":""}`,children:e.jsxs("div",{className:`max-w-xs rounded-lg px-4 py-2 shadow-sm ${s.sender.fullName?"bg-blue-500 text-white rounded-tr-none":"bg-white rounded-tl-none"}`,children:[e.jsx("p",{className:s.sender.fullName?"text-white":"text-gray-800",children:s.content}),e.jsx("p",{className:`text-xs text-right mt-1 ${s.sender.fullName?"text-blue-100":"text-gray-400"}`,children:new Date(s.createdAt).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})})]})},a)):e.jsx("div",{className:"flex justify-center items-center h-full text-gray-500",children:e.jsx("p",{children:"No messages yet. Start the conversation!"})})}),e.jsx("div",{className:"p-3 border-t border-gray-200 bg-white",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("textarea",{value:T,onChange:s=>L(s.target.value),placeholder:"Type your message...",rows:1,className:"flex-1 px-4 py-2 border border-gray-300 rounded-full focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none max-h-32",onKeyDown:s=>s.key==="Enter"&&!s.shiftKey&&B()}),e.jsx("button",{onClick:B,disabled:!T.trim()||P,className:"p-2 bg-blue-600 text-white rounded-full hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:P?e.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):e.jsx(re,{size:20,className:"transform -rotate-45"})})]})})]})})]})},Fe=()=>{const[N,g]=r.useState(null),[b,A]=r.useState(!0),[f,J]=r.useState(0),[d,M]=r.useState(0),[m,v]=r.useState(0),[w,x]=r.useState(0);le();const h=oe();return r.useEffect(()=>{const u=localStorage.getItem("authToken");console.log("Token:",u),(async()=>{try{const t=await fetch(`${y}users/me`,{method:"GET",headers:{"Content-Type":"application/json",Authorization:u}});if(!t.ok){const o=await t.text();throw console.error("Error Response:",o),new Error(`Failed to fetch profile: ${o}`)}const n=await t.json();h(ie(n)),h(A(!1)),g(n)}catch(t){console.error("Error fetching profile:",t)}finally{A(!1)}})()},[]),r.useEffect(()=>{const u=localStorage.getItem("authToken");(async()=>{try{const t=await k.get(`${y}jobs/employer/jobs`,{headers:{"Content-Type":"application/json",Authorization:u}});console.log("Jobs Response from dashboard:",t.data),J(t.data.jobs.length),v(t.data.jobs.filter(n=>n.status==="open").length),x(t.data.jobs.filter(n=>n.status==="closed").length),M(t.data.jobs.reduce((n,o)=>{var c;return n+(o.applicantCount||((c=o.applicants)==null?void 0:c.length)||0)},0))}catch(t){t.response?console.error("Error Response:",t.response.data):t.request?console.error("No response received:",t.request):console.error("Error setting up request:",t.message)}finally{A(!1)}})()},[]),e.jsxs("div",{className:"flex flex-col gap-y-4",children:[e.jsxs("div",{className:"card-body flex flex-col gap-3 p-0 md:flex-row",children:[e.jsxs("div",{className:"flex h-[100px] w-full flex-row items-center justify-start gap-4 rounded-md bg-[#F1F5F9] p-4 md:w-1/2",children:[e.jsx("div",{className:"w-fit rounded-full bg-blue-500/20 p-2 text-blue-500 transition-colors dark:bg-blue-600/20 dark:text-blue-600",children:e.jsx(G,{size:20})}),e.jsxs("div",{className:"gap-0 p-0",children:[e.jsx("p",{className:"font-bold text-3xl",children:f}),e.jsx("p",{className:"text-xs",children:"Total Posted Jobs"})]})]}),e.jsxs("div",{className:"flex h-[100px] w-full flex-row items-center justify-start gap-4 rounded-md bg-[#F1F5F9] p-4 md:w-1/2",children:[e.jsx("div",{className:"w-fit rounded-full bg-blue-500/20 p-2 text-blue-500 transition-colors dark:bg-blue-600/20 dark:text-blue-600",children:e.jsx(ne,{size:20})}),e.jsxs("div",{className:"gap-0 p-0",children:[e.jsx("p",{className:"font-bold text-3xl",children:d}),e.jsx("p",{className:"text-xs",children:"Application Received"})]})]}),e.jsxs("div",{className:"flex h-[100px] w-full flex-row items-center justify-start gap-4 rounded-md bg-[#F1F5F9] p-4 md:w-1/2",children:[e.jsx("div",{className:"w-fit rounded-full bg-blue-500/20 p-2 text-blue-500 transition-colors dark:bg-blue-600/20 dark:text-blue-600",children:e.jsx(je,{size:20})}),e.jsxs("div",{className:"gap-0 p-0",children:[e.jsx("p",{className:"font-bold text-3xl",children:m}),e.jsx("p",{className:"text-xs",children:"Active Jobs"})]})]}),e.jsxs("div",{className:"flex h-[100px] w-full flex-row items-center justify-start gap-4 rounded-md bg-[#F1F5F9] p-4 md:w-1/2",children:[e.jsx("div",{className:"w-fit rounded-full bg-blue-500/20 p-2 text-blue-500 transition-colors dark:bg-blue-600/20 dark:text-blue-600",children:e.jsx(ye,{size:20})}),e.jsxs("div",{className:"gap-0 p-0",children:[e.jsx("p",{className:"font-bold text-3xl",children:w}),e.jsx("p",{className:"text-xs",children:"Expired Jobs"})]})]})]}),e.jsx(ve,{}),e.jsx(we,{}),e.jsx(Ne,{})]})};export{Fe as default};
