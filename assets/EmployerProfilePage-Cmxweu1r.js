import{r as s,j as e,a as h,u as x}from"./index-C-m3EaxS.js";const N=()=>{const[o,r]=s.useState({companyName:"",phone:"",email:"",bio:"",companyLogo:null}),[m,i]=s.useState(!1),[c,b]=s.useState(null),g=async()=>{try{const a=localStorage.getItem("token"),t=await h.get(`${x}users/me`,{headers:{Authorization:a}});r({companyName:t.data.companyName||"",phone:t.data.phone||"",email:t.data.email||"",bio:t.data.bio||"",companyLogo:null})}catch(a){console.error("Failed to fetch profile:",a.message)}};s.useEffect(()=>{g()},[]);const l=a=>{if(a.target.name==="companyLogo"){const t=a.target.files[0];r({...o,companyLogo:t}),b(URL.createObjectURL(t))}else r({...o,[a.target.name]:a.target.value})},f=async a=>{var p,u;a.preventDefault(),i(!0);const t=localStorage.getItem("token"),d=new FormData;for(const n in o)o[n]&&d.append(n,o[n]);try{const n=await h.put(`${x}users/employer/profile`,d,{headers:{Authorization:t,"Content-Type":"multipart/form-data"}});alert("Profile updated successfully!")}catch(n){alert("Update failed: "+((u=(p=n.response)==null?void 0:p.data)==null?void 0:u.message))}finally{i(!1)}};return e.jsxs("form",{onSubmit:f,className:"max-w-xl mx-auto p-2 bg-white text-xs",children:[e.jsx("h2",{className:"text-xl font-bold mb-4",children:"Update Employer Profile"}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",name:"companyName",value:o.companyName,onChange:l,className:"w-full border px-3 py-2 rounded outline-none",required:!0,placeholder:"Company Name"})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"text",name:"phone",value:o.phone,onChange:l,className:"w-full border px-3 py-2 rounded outline-none",placeholder:"Phone"})}),e.jsx("div",{className:"mb-4",children:e.jsx("input",{type:"email",name:"email",value:o.email,onChange:l,className:"w-full border px-3 py-2 rounded outline-none",placeholder:"E-mail Address"})}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Company Bio"}),e.jsx("textarea",{name:"bio",value:o.bio,onChange:l,rows:"4",className:"w-full border px-3 py-2 rounded outline-none"})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{className:"block mb-1",children:"Company Logo"}),e.jsx("input",{type:"file",name:"companyLogo",accept:"image/*",onChange:l,className:"w-full"}),c&&e.jsx("img",{src:c,alt:"Logo Preview",className:"mt-2 w-24 h-24 object-contain border rounded"})]}),e.jsx("button",{type:"submit",disabled:m,className:"bg-blue-600 text-white px-4 py-2 rounded hover:bg-blue-700",children:m?"Updating...":"Update Profile"})]})};export{N as default};
