import{c as C,r as d,j as e,T as A,U as $,a as u,u as m}from"./index-CmvBuaAL.js";import{P as f}from"./plus-DzaCw6xK.js";import{S as I}from"./save-D_Q0075r.js";import{T as N}from"./trash-2-14Gm8EGC.js";import{E as U}from"./eye-CQWccWMY.js";import{C as B}from"./clock-8OGjY4dO.js";import{C as L}from"./calendar-D7jjqM7E.js";/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const q=C("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.441.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O=C("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),V=()=>{const[o,c]=d.useState([]),[w,y]=d.useState(!0),[x,j]=d.useState(null),[g,h]=d.useState(!1),[t,l]=d.useState({title:"",description:"",category:"",difficulty:"Beginner",duration:"",price:"",instructor:"",published:!1,thumbnail:"",modules:[]}),k=["Programming","Design","Marketing","Business","Data Science","Photography"],z=["Beginner","Intermediate","Advanced"];d.useEffect(()=>{(async()=>{try{y(!0);const a=localStorage.getItem("authToken"),r=await u.get(`${m}courses`,{headers:{Authorization:a}});console.log("Courses",r.data);const i=Array.isArray(r.data)?r.data:r.data.courses||[];c(i)}catch(a){console.error("Failed to fetch courses:",a),alert("Failed to load courses. Please try again later.")}finally{y(!1)}})()},[]);const p=()=>{l({title:"",description:"",category:"",difficulty:"Beginner",duration:"",price:"",instructor:"",published:!1,thumbnail:"",modules:[]}),j(null),h(!1)},S=s=>{j(s._id),l({title:s.title||"",description:s.description||"",category:s.category||"",difficulty:s.difficulty||"Beginner",duration:s.duration||"",price:s.price||"",instructor:s.instructor||"",published:s.published||!1,thumbnail:s.thumbnail||"",modules:s.modules||[]}),h(!1)},v=()=>{p(),h(!0)},D=async()=>{var s,a;console.log("Save called");try{if(!t.title||!t.description||!t.category){alert("Please fill in all required fields");return}const r=localStorage.getItem("authToken");if(x){const i=await u.put(`${m}courses/${x}`,t,{headers:{"Content-Type":"application/json",Authorization:r}});console.log("Course updated",i.data),c(o.map(n=>n._id===x?i.data.course||i.data:n))}else{const i=await u.post(`${m}courses`,t,{headers:{"Content-Type":"application/json",Authorization:r}});console.log("Course created",i.data);const n=i.data.course||i.data;c([...o,n])}p()}catch(r){console.error("Failed to save course:",r),alert("Failed to save course: "+(((a=(s=r.response)==null?void 0:s.data)==null?void 0:a.message)||r.message))}},E=async s=>{if(window.confirm("Are you sure you want to delete this course?"))try{const a=localStorage.getItem("authToken");await u.delete(`${m}courses/${s}`,{headers:{Authorization:a}}),c(o.filter(r=>r._id!==s))}catch(a){console.error("Failed to delete course:",a),alert("Failed to delete course. Please try again.")}},_=async s=>{try{const a=o.find(n=>n._id===s),r=localStorage.getItem("authToken"),i=await u.put(`${m}courses/${s}`,{...a,published:!a.published},{headers:{"Content-Type":"application/json",Authorization:r}});c(o.map(n=>n._id===s?{...n,published:!n.published}:n))}catch(a){console.error("Failed to update course status:",a),alert("Failed to update course status. Please try again.")}},F=()=>{const s={title:"",text:"",media:"",duration:"",quiz:[]};l({...t,modules:[...t.modules||[],s]})},b=(s,a,r)=>{l({...t,modules:t.modules.map(i=>i._id===s?{...i,[a]:r}:i)})},M=s=>{l({...t,modules:t.modules.filter(a=>a._id!==s)})},P=s=>new Date(s).toLocaleDateString(),T=x||g;return w?e.jsx("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen text-xs",children:e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),e.jsx("p",{className:"mt-4 text-gray-600",children:"Loading courses..."})]})})}):e.jsx("div",{className:"max-w-7xl mx-auto p-6 bg-gray-50 min-h-screen text-xs",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[e.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 text-white p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Course Management"}),e.jsx("p",{className:"text-blue-100 mt-1",children:"Create, edit, and manage your courses"})]}),e.jsxs("button",{onClick:v,className:"bg-white text-blue-600 px-4 py-2 rounded-lg font-medium hover:bg-blue-50 transition-colors flex items-center gap-2",children:[e.jsx(f,{size:20}),"New Course"]})]})}),e.jsx("div",{className:"p-6",children:T?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h2",{className:"text-xl font-semibold",children:g?"Create New Course":"Edit Course"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("button",{onClick:p,className:"px-4 py-2 text-gray-600 bg-gray-100 rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),e.jsxs("button",{onClick:D,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors flex items-center gap-2",children:[e.jsx(I,{size:16}),g?"Create Course":"Update Course"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 border-b pb-2",children:"Basic Information"}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Course Title *"}),e.jsx("input",{type:"text",value:t.title,onChange:s=>l({...t,title:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter course title"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description *"}),e.jsx("textarea",{value:t.description,onChange:s=>l({...t,description:s.target.value}),rows:4,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Enter course description"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category *"}),e.jsxs("select",{value:t.category,onChange:s=>l({...t,category:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[e.jsx("option",{value:"",children:"Select category"}),k.map(s=>e.jsx("option",{value:s,children:s},s))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Difficulty"}),e.jsx("select",{value:t.difficulty,onChange:s=>l({...t,difficulty:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:z.map(s=>e.jsx("option",{value:s,children:s},s))})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"font-medium text-gray-900 border-b pb-2",children:"Course Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Duration"}),e.jsx("input",{type:"text",value:t.duration,onChange:s=>l({...t,duration:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"e.g., 8 weeks"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Price ($)"}),e.jsx("input",{type:"number",value:t.price||"",onChange:s=>l({...t,price:parseFloat(s.target.value)||null}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"0"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Instructor"}),e.jsx("input",{type:"text",value:t.instructor,onChange:s=>l({...t,instructor:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"Instructor name"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thumbnail URL"}),e.jsx("input",{type:"text",value:t.thumbnail,onChange:s=>l({...t,thumbnail:s.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",placeholder:"https://example.com/image.jpg"})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx("input",{type:"checkbox",id:"published",checked:t.published,onChange:s=>l({...t,published:s.target.checked}),className:"rounded text-blue-600 focus:ring-blue-500"}),e.jsx("label",{htmlFor:"published",className:"ml-2 text-sm text-gray-700",children:"Publish course immediately"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium text-gray-900",children:"Course Modules"}),e.jsxs("button",{onClick:F,className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors flex items-center gap-1 text-sm",children:[e.jsx(f,{size:14}),"Add Module"]})]}),t.modules&&t.modules.length>0?e.jsx("div",{className:"space-y-2",children:t.modules.map((s,a)=>e.jsxs("div",{className:"flex gap-4 items-start p-3 rounded-lg",children:[e.jsx("div",{children:e.jsxs("span",{className:"text-sm font-medium text-gray-500 w-8",children:[a+1,"."]})}),e.jsxs("div",{className:"flex flex-col gap-2 items-center w-full",children:[e.jsxs("div",{className:"flex gap-2 items-center rounded-lg w-full",children:[e.jsx("input",{type:"text",value:s.title,onChange:r=>b(s._id,"title",r.target.value),placeholder:"Module title",className:"flex-1 px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"}),e.jsx("input",{type:"text",value:s.duration,onChange:r=>b(s._id,"duration",r.target.value),placeholder:"Duration",className:"w-24 px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"}),e.jsx("button",{onClick:()=>M(s._id),className:"p-1 text-red-600 hover:bg-red-100 rounded",children:e.jsx(N,{size:14})})]}),e.jsx("textarea",{value:s.text,onChange:r=>b(s._id,"text",r.target.value),placeholder:"Module content",className:"w-full px-2 py-1 border border-gray-300 rounded focus:ring-1 focus:ring-blue-500 focus:border-transparent"})]})]},s._id))}):e.jsx("p",{className:"text-gray-500 text-sm italic",children:"No modules added yet"})]})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h2",{className:"text-xl font-semibold",children:["All Courses (",o.length,")"]}),e.jsxs("div",{className:"text-sm text-gray-600",children:[o.filter(s=>s.published).length," published,"," ",o.filter(s=>!s.published).length," draft"]})]}),o.length===0?e.jsxs("div",{className:"text-center py-12",children:[e.jsx("div",{className:"text-gray-400 mb-4",children:e.jsx(O,{size:48,className:"mx-auto"})}),e.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No courses yet"}),e.jsx("p",{className:"text-gray-600 mb-4",children:"Get started by creating your first course"}),e.jsxs("button",{onClick:v,className:"bg-blue-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors flex items-center gap-2 mx-auto",children:[e.jsx(f,{size:20}),"Create Your First Course"]})]}):e.jsx("div",{className:"grid gap-4",children:o.map(s=>e.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:shadow-md transition-shadow",children:e.jsxs("div",{className:"flex gap-4",children:[e.jsxs("div",{className:"w-20 h-20 bg-gray-200 rounded-lg flex-shrink-0 overflow-hidden",children:[s.thumbnail?e.jsx("img",{src:s.thumbnail,alt:s.title,className:"w-full h-full object-cover",onError:a=>{a.target.style.display="none",a.target.nextSibling.style.display="flex"}}):null,e.jsx("div",{className:"w-full h-full bg-gray-300 flex items-center justify-center text-gray-500 text-xs",style:{display:s.thumbnail?"none":"flex"},children:"No Image"})]}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("h3",{className:"font-semibold text-gray-900 truncate",children:s.title}),e.jsx("span",{className:`px-2 py-1 rounded-full text-xs font-medium ${s.published?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:s.published?"Published":"Draft"})]}),e.jsx("p",{className:"text-gray-600 text-sm mt-1 line-clamp-2",children:s.description})]}),e.jsxs("div",{className:"flex items-center gap-2 ml-4",children:[e.jsx("button",{onClick:()=>_(s._id),className:"p-2 text-gray-600 hover:bg-gray-100 rounded-lg",title:s.published?"Unpublish":"Publish",children:s.published?e.jsx(q,{size:16}):e.jsx(U,{size:16})}),e.jsx("button",{onClick:()=>S(s),className:"px-3 py-1 bg-blue-100 text-blue-700 rounded-md hover:bg-blue-200 transition-colors text-sm",children:"Edit"}),e.jsx("button",{onClick:()=>E(s._id),className:"p-2 text-red-600 hover:bg-red-100 rounded-lg",children:e.jsx(N,{size:16})})]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-3 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(A,{size:14}),s.category]}),s.duration&&e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(B,{size:14}),s.duration]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx($,{size:14}),s.enrollments," enrolled"]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(L,{size:14}),P(s.createdAt)]}),e.jsx("div",{className:"ml-auto font-medium text-gray-900",children:s.price?`$${s.price}`:"Free"})]})]})]})},s._id))})]})})]})})};export{V as default};
