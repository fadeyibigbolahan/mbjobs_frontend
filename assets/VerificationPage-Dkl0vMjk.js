import{r as n,g as E,d as A,j as s,v as C,a as j,u as v}from"./index-EQ3434Au.js";const O=()=>{var p;const[c,y]=n.useState(new Array(6).fill("")),[f,l]=n.useState(""),[m,d]=n.useState(""),[x,o]=n.useState(!1),[h,u]=n.useState(!1),g=(p=E().state)==null?void 0:p.email,i=n.useRef([]),w=A(),N=(a,e)=>{const t=a.value.replace(/\D/g,"");if(t){const r=[...c];r[e]=t,y(r),e<5&&i.current[e+1]&&i.current[e+1].focus()}},F=(a,e)=>{a.key==="Backspace"&&!c[e]&&e>0&&i.current[e-1].focus()},R=a=>{a.preventDefault(),l(""),d(""),o(!0);const e=c.join("");if(e.length!==6){l("⚠️ Please enter the complete 6-digit code."),o(!1);return}j.post(`${v}auth/verify-email`,{email:g,otp:e}).then(t=>{d("✅ Verification successful!"),o(!1),setTimeout(()=>{w("/dashboard/overview")},500)}).catch(t=>{var r,b;console.error("OTP verification error:",t),l(((b=(r=t.response)==null?void 0:r.data)==null?void 0:b.message)||"❌ Verification failed! Please try again later."),o(!1)})},S=()=>{u(!0),j.post(`${v}auth/resend-code`,{email:g}).then(a=>{u(!1),d("✅ Verification code sent successfully!")}).catch(a=>{var e,t;u(!1),l(((t=(e=a.response)==null?void 0:e.data)==null?void 0:t.message)||"❌ Failed to resend code! Please try again later.")})};return s.jsx("div",{className:"relative h-screen w-full flex justify-center items-center flex-col gap-y-4 md:flex-row",children:s.jsx("div",{className:"h-full w-full bg-[#FFFFFF] md:w-[40%]",children:s.jsx("div",{className:"flex min-h-screen items-center justify-center",children:s.jsxs("div",{className:"flex w-full flex-col items-center justify-center rounded-xl border bg-white p-8 gap-4",children:[s.jsx("img",{src:C,alt:"virtual Logo",style:{width:"100px"}}),s.jsx("h2",{className:"font-kanit mb-4 text-center text-sm font-semibold text-[#003366]",children:"ENTER VERIFICATION CODE"}),m&&s.jsx("p",{className:"mb-2 text-center text-sm text-green-600",children:m}),f&&s.jsx("p",{className:"mb-2 text-center text-sm text-red-500",children:f}),s.jsxs("form",{onSubmit:R,className:"w-full",children:[s.jsx("div",{className:"flex justify-between mb-6",children:c.map((a,e)=>s.jsx("input",{type:"text",maxLength:"1",value:a,onChange:t=>N(t.target,e),onKeyDown:t=>F(t,e),ref:t=>i.current[e]=t,className:"w-10 h-10 border rounded text-center text-lg text-[#003366 ] outline-none focus:ring-2 focus:ring-[#003366 ]"},e))}),s.jsx("button",{type:"submit",className:"w-full rounded bg-[#003366] py-2 text-white hover:bg-[#7A54A1] flex justify-center items-center",disabled:x,children:x?s.jsx("div",{className:"w-5 h-5 border-2 border-t border-white rounded-full animate-spin"}):"Verify"})]}),s.jsxs("p",{className:"font-kanit mt-4 text-center text-gray-600",children:["Didn't receive code?"," ",s.jsx("button",{className:"text-[#003366 ] hover:text-[#7A54A1] underline",onClick:S,disabled:h,children:h?"Resending...":"Resend"})]})]})})})})};export{O as default};
