import{r,d as L,e as A,f as k,j as e,L as u,v as E,y as D,l as M}from"./index-C-m3EaxS.js";import{S as P,F as R}from"./Failure-Ce9-cNVx.js";import{M as O}from"./mail-DqSfky1E.js";import{K as T}from"./key-square-c8-gb6QK.js";import"./check-oxtqp6Bn.js";const H=()=>{const[n,b]=r.useState({email:"",password:""}),[m,i]=r.useState(""),[x,l]=r.useState(""),[f,N]=r.useState(!1),[h,p]=r.useState(""),[S,g]=r.useState(!1),[y,w]=r.useState(!1),o=L(),F=A(),s=k(t=>t.auth),j=s.status==="loading";r.useEffect(()=>{var t;if(s.status==="succeeded"&&s.user)console.log("auth user",s.user),l("✅ Login successful! Redirecting..."),p("Login successful! Redirecting..."),g(!0),setTimeout(()=>{console.log("autttt",s.user),s.user.verified&&s.user.role==="apprentice"?o("/dashboard/apprentice-overview"):s.user.verified&&s.user.role==="employer"?o("/dashboard/overview"):s.user.verified&&s.user.role==="admin"?o("/dashboard/admin-overview"):o("/verification",{state:{email:s.user.email}})},100);else if(s.status==="failed"){const a=typeof s.error=="string"?s.error:((t=s.error)==null?void 0:t.message)||"❌ Login failed! Please check your credentials.";i(a),p(a),w(!0),l("")}},[s.status,s.user,s.error,o]);const v=t=>{const{name:a,value:c}=t.target;b(d=>({...d,[a]:c})),i(""),l("")},C=t=>{t.preventDefault(),i(""),l("");const a=n.email.trim().toLowerCase(),c=n.password;if(!a||!c){const d="⚠️ Email and password are required";i(d),D.warn(d);return}F(M({email:a,password:c}))};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"relative h-screen w-full flex flex-col justify-center items-center gap-y-4 md:flex-row",children:e.jsx("div",{className:"w-full bg-[#FFFFFF] md:w-[40%]",children:e.jsx("div",{className:"flex min-h-screen items-center justify-center",children:e.jsxs("div",{className:"flex w-full flex-col items-center justify-center rounded-xl border bg-white p-8 gap-4",children:[e.jsx(u,{to:"/",children:e.jsx("img",{src:E,alt:"virtual Logo",style:{width:"50px"}})}),e.jsx("h2",{className:"font-kanit mb-4 text-center text-sm font-semibold text-[#003366 ]",children:"LOGIN TO YOUR ACCOUNT"}),x&&e.jsx("p",{className:"mb-2 text-center text-sm text-green-600",children:x}),m&&e.jsx("p",{className:"mb-2 text-center text-sm text-red-500",children:m}),e.jsxs("form",{onSubmit:C,className:"w-full",children:[e.jsxs("div",{className:"mb-4 w-full mt-1 rounded border gap-2 p-2 flex items-center justify-between",children:[e.jsx(O,{className:"text-[#003366 ]",size:16}),e.jsx("input",{type:"text",name:"email",value:n.email,onChange:v,className:"w-full text-sm decoration-none outline-none",placeholder:"Enter email"})]}),e.jsxs("div",{className:"mb-4 w-full mt-1 rounded border gap-2 p-2 flex items-center justify-between",children:[e.jsx(T,{className:"text-[#003366 ]",size:20}),e.jsx("input",{type:f?"text":"password",name:"password",value:n.password,onChange:v,className:"w-full text-sm decoration-none outline-none",placeholder:"Password"}),e.jsx("div",{className:"flex justify-center items-center p-1 cursor-pointer",onClick:()=>N(t=>!t),children:e.jsx("p",{className:"text-xs text-[#003366 ]",children:f?"Hide":"Show"})})]}),e.jsx("button",{type:"submit",className:"w-full rounded bg-[#003366] py-2 text-white hover:bg-[#7A54A1] flex justify-center items-center",disabled:j,children:j?e.jsx("div",{className:"w-5 h-5 border-2 border-t border-white rounded-full animate-spin"}):"Login"})]}),e.jsxs("div",{children:[e.jsxs("p",{className:"font-kanit mt-4 text-center text-gray-600",children:["Don't have an account?"," ",e.jsx(u,{to:"/signup",className:"text-[#003366 ] hover:text-[#7A54A1]",children:"Sign up"})]}),e.jsx("p",{className:"font-kanit mt-2 text-center text-gray-600",children:e.jsx(u,{to:"/forgot-password",className:"text-[#003366 ] hover:text-[#7A54A1]",children:"Forget your password?"})})]})]})})})}),S&&e.jsx(P,{message:h,onClose:()=>g(!1)}),y&&e.jsx(R,{message:h,onClose:()=>w(!1)})]})};export{H as default};
